!function(t){var e={};function s(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=t,s.c=e,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(n,r,function(e){return t[e]}.bind(null,r));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=0)}([function(t,e,s){"use strict";s.r(e);var n=class{constructor(t){this.data=t}viewStatusInfo(t){const{Number:e,Status:s,StatusCode:n,ActualDeliveryDate:r,CityRecipient:i,CitySender:o,WarehouseRecipient:a,WarehouseSender:u}=this.data;let l=`<p>Status: ${s}</p>`;a&&(l+=`<p><b>Recipient:</b> ${i}. ${a}</p>`),u&&(l+=`<p><b>Sender:</b> ${o}. ${u}</p>`),t.innerHTML=l}};var r=class{constructor(t,e){this.apiKey=t,this.modelName="TrackingDocument",this.calledMethod="getStatusDocuments",this.methodProperties={Documents:[{DocumentNumber:e,Phone:""}]}}};var i=class{constructor(t){this.apiKey=t}getTTN(t){const e=new r(this.apiKey,t);return fetch("https://api.novaposhta.ua/v2.0/json/",{method:"POST",body:JSON.stringify(e)}).then(t=>t.json()).then(t=>t.data[0]).then(t=>new n(t)).catch(t=>alert("HTTP request error.  "+t))}};var o=class{constructor(t,e){this.ttnApi=new i(t),this.ttnForm=e,this.statusInfoContainer=document.querySelector("#ttn-status-result")}getHistoryTtns(){return JSON.parse(localStorage.getItem("historyTtns")||"[]")}addToHistory(t){let e=JSON.parse(localStorage.getItem("historyTtns")||"[]");e.includes(t)||(e.push(t),localStorage.setItem("historyTtns",JSON.stringify(e)),this.viewHistoryBlock())}getHistoryInfo(t){const e=t.target.innerText;this.ttnForm.ttnNumberElem.value=e;this.ttnApi.getTTN(e).then(t=>{t.viewStatusInfo(this.statusInfoContainer)})}viewHistoryBlock(){const t=document.querySelector(".ttns-history__result"),e=this.getHistoryTtns();if(e.length){const s=document.createElement("ul");e.forEach(t=>{const e=document.createElement("li");e.classList.add("ttns-history__result-item"),e.onclick=this.getHistoryInfo.bind(this),s.appendChild(e),e.innerHTML=t}),t.innerHTML="",t.appendChild(s);const n=document.createElement("button");n.innerHTML="Clear history",n.classList.add("form-btn"),n.onclick=this.deleteHistory.bind(this),t.appendChild(n)}else t.innerHTML="The history is empty"}deleteHistory(){localStorage.removeItem("historyTtns"),this.viewHistoryBlock()}};new class{constructor(t){this.apiKey=t,this.form=document.querySelector("#ttn-status-form"),this.ttnNumberElem=this.form.querySelector("#ttn_number"),this.message=this.form.querySelector("#ttn_number__error"),this.regExForTTN=/^(5|2|1)[0-9]{13}$/,this.TTNApi=new i(t),this.statusInfoContainer=document.querySelector("#ttn-status-result")}isValidNumber(){return!!this.regExForTTN.test(this.ttnNumberElem.value)}getInfo(t){if(t.preventDefault(),this.isValidNumber()){this.ttnNumberElem.classList.remove("invalid"),this.message.classList.remove("show");this.TTNApi.getTTN(this.ttnNumberElem.value).then(t=>{t.viewStatusInfo(this.statusInfoContainer),this.ttnHistory.addToHistory(t.data.Number)})}else this.ttnNumberElem.classList.add("invalid"),this.message.classList.add("show"),this.statusInfoContainer.innerHTML=""}init(){this.ttnHistory=new o(this.apiKey,this),this.form.onsubmit=this.getInfo.bind(this),this.ttnHistory.viewHistoryBlock()}}("f32192aa4b7940e82fbe254e62673948").init()}]);